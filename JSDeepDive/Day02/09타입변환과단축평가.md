## 타입 변환과 단축 평가

### 타입변환이란

- 의도적으로 값의 타입을 변환하는 것을 명시적 타입변환 or 타입 캐스팅이라고 함.
- JS엔진에 의해 암묵적으로 타입이 자동으로 변환하는 것을 암묵적 타입 변환 or 타입 강제 변환이라고 함.
- 명시적 or 암묵적 타입변환은 기존 원시 값을 직접 변경하는 것이 아님. 왜냐하면 원시 값은 변경 불가능한 값이기 때문임.
- 타입 변환은 기존 원시값을 통해 새로운 원시값을 생성하는 것임.
- 암묵적 타입변환은 개발자의 의도가 명백히 드러나지 않기에 만약 예측 못하는 경우 오류를 생산할 가능성이 높음.
- 그러나 때로는 암묵적 타입변환이 가동성 측면에서 더 좋을 수 있기에 사용하는 경우도 많음.

### 암묵적 타입변환

- JS는 가급적 에러를 발생시키지 않도록 암묵적 타입 변환을 통해 표현식을 평가함

- 문자열 타입의 변환

  - `+` 연산자는 피연산자 중 하나 이상이 문자열이면 문자열 연결 연산자로 동작함. 따라서 피연산자가 문자열이 아니면 문자열 타입으로 암묵적 타입 변환을 함.
  - 템플릿 티러럴의 표현식 삽입을 통해 표현식의 평가 결과를 문자열 타입으로 암묵적 타입 변환을 할 수도 있음
  - 심벌과 객체 타입 이외에는 해당 값을 그대로 문자열로 변환을 함.

- 숫자 타입 변환

  - `+` 연산자 외의 산술연산자들은 숫자 값을 만들기에 숫자 타입으로 암묵적 변환을 함. 숫자 타입으로 변환할 수 없는 경우 NaN을 반환 ex) 1 - '1' -> 0
  - `>` 비교 연산자를 사용하기 위해서는 두 수를 비교하기 때문에 숫자 타입으로 암묵적 타입 변환을 한 후에 평가를 함 ex) '1' > 0 -> true
  - `+` 단항 연산자는 숫자 타입의 값으로 암묵적 타입 변환을 수행함. ex) +' ' -> 0, +'string' -> NaN
  - `+` 단항 연산자로 '', [], null, false는 0으로 변환, true는 1로 변환, undefined와 객체는 NaN

- 불리언 타입 변환
  - false, undefined, null, 0, -0, NaN, ''(빈문자열)은 Falsy 값으로 불리언값으로 평가될 시 false로 변환함.
  - 그 외는 Truthy 값.

### 명시적 타입변환

- 문자열 타입으로 변환

  - String 생성자 함수를 new 연산자 없이 호출. ex) String(1) => "1"
  - Object.prototype.toString 메서드. ex) (1).toString(); => "1"
  - 문자열 연결 연산자 사용. ex) 1 + ''; => "1"

- 숫자 타입으로 변환

  - Number 생성자 함수를 new 연산자 없이 호출. ex) Number('1') => 1
  - parseInt, parseFloat 함수 사용(단, 문자열에서 숫자타입 변환만 해당). ex) parseInt('1') => 1
  - `+` 단항 산술연산자, `*` 산술 연산자 이용하는 방법

- 불리언 타입으로 변환

  - Boolean 생성자 함수를 new 연산자 없이 호출하는 방법 ex) Boolean(1) => true
  - !부정논리 연산자 두번 사용 방법 ex) !! 1 => true

### 단축평가

- 논리연산자와 단축평가

  - 'a' && 'b'는 'b'를 반환함. 왜냐하면 'a'가 true여도 'b'가 무엇인지에 따라 평가 결과가 달라지기 때문임.
  - 평가 결과를 확정적으로 짓는 값을 반환하는 논리임. 이를 응용하면 'a' || 'b'는 'a'를 반환함
  - 이와 같이 표현식을 평가하는 도중에 평가 결과가 확정되어 나머지 평가 과정을 생략하는 것을 단축평가(short-circuit evaluation)이라 부름.
  - 이를 활용하여 값이 undefined 또는 null 인경우를 회피하는데 사용함.
  - ex) let value = elem && elem.value <- elem이 undefined/null이면 Falsy값으로 elem을 반환하여 에러를 막음.

- 옵셔널 체이닝 연산자

  - `?.`
  - 좌항의 피연산자가 null 또는 undefined인 경우 undefined 반환
  - 그렇지 않으면 우항의 프로퍼티를 참조하여 이어감
  - Falsy 값은 null/undefined에 해당 안됨

- null 병합 연산자

  - `??`
  - 좌항의 피연산자가 null 또는 undefined인 경우 우항의 피연산자를 반환
  - 그렇지 않으면 좌항의 피연산자를 반환함
  - Falsy 값은 null/undefined에 해당 안됨
