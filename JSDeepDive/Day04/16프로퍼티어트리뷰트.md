## 프로퍼티 어트리뷰트

### 내부 슬록과 내부 메서드

- 내부 슬롯과 내부 메서드는 JS엔진의 구현 알고리즘을 설명하기 위해 ECMAScript 사양에서 사용하는 의사 프로퍼티와 의사 메서드임. (이중 대괄호로 ECMA에서 표현함)
- 내부 슬롯과 내부 메서드는 JS엔진에서 실제로 동작하지만 개발자가 접근할 수 있는 공개된 객체의 프로퍼티는 아님.
- 근데 `[[Prototype]]`이라는 내부 스롯은 `__prototype__`을 통해 간접적으로 접근 가능함.

### 프로퍼티 어트리뷰트와 프로퍼티 디스크립터 객체

- JS엔진은 프로퍼티 생성시 프로퍼티 어트리뷰트를 기본값으로 자동 정의함. (값. value, 갱신가능여부. writable, 열거가능여부. enumerable, 재정의 가능여부. configurable)
- 프로퍼티 어트리뷰트는 내부 상태 값인 내부 슬롯임.
- 직접 접근할 수 없지만. Object.getOwnPropertyDescriptor 메서드를 사용하여 간접적으로 확인 가능. (첫번째 매개변수에 객체의 참조, 두번째에는 프로퍼티 키)
- Object.getOwnPropertyDescriptor은 프로퍼티 디스크립터(property descriptor) 객체를 반환함. 존재하지 않을 시 undefined 반환.
- Object.getOwnPropertyDescriptors 메서드는 모든 프로퍼티의 프로퍼티 어트리뷰트 정보를 제공하는 프로퍼티 디스크립터 객체를 반환함.

### 데이터 프로퍼티와 접근자 프로퍼티

프로퍼티는 데이터 프로퍼티와 접근자 프로퍼티로 나눌 수 있음

- 데이터 프로퍼티(data property)

  - 키와 값으로 구성된 일반적 프로퍼티
  - 프로퍼티 생성시 자동으로 프로퍼티 어트리뷰트를 정의함
  - `[[value]]`
    - 프로퍼티 키를 통해 값에 접근하면 반환되는 값
    - 프로퍼티 키를 통해 값 변경시 `[[value]]`에 값을 재할당함. 만약 프로퍼티 없으면 동적 생성하고 값을 저장함.
  - `[[writable]]`
    - 프로퍼티 값의 변경 가능 여부를 불리언 값으로 나타냄
    - false인 경우 읽기 전용 프로퍼티가 됨
  - `[[enumerable]]`
    - 프로퍼티 열거 가능 여부를 불리언 값으로 나타냄
    - false인 경우 for ...in, Object.keys 메서드 등으로 열거 불가능함.
  - `[[configurable]]`
    - 프로퍼티 재정의 가능 여부를 불리언 값으로 나타냄
    - false인 경우 프로퍼티 삭제, 어트리뷰트 값의 변경이 불가능함.
    - false이며 `[[writable]]`이 true면 `[[value]]`의 변경과 `[[writable]]` false로 변경하는 것은 가능함.

- 접근자 프로퍼티(accessor property)

  - 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나, 저장할때 호출되는 접근자 함수로 구성된 프로퍼티
  - `[[get]]`
    - 데이터 프로퍼티의 값을 읽을 때 호출되는 접근자 함수
    - getter 함수를 호출하여 프로퍼티 값을 반환
  - `[[set]]`
    - 데이터 프로퍼티 값을 저장할 때 호출되는 접근자 함수
    - setter 함수를 호출하여 프로퍼티 값을 저장
  - `[[enumerable]]`
    - 데이터 프로퍼티의 enumerable과 같음
  - `[[configurable]]`
    - 데이터 프로퍼티의 configurable과 같음

### 프로퍼티 정의

- 새로운 프로퍼티를 추가하면서 프로퍼티 어트리뷰트를 명시적으로 정의하거나, 기존 프로퍼티의 프로퍼티 어트리뷰트를 재정의하는 것
- Object.defineProperty 메서드를 통해 하나의 프로퍼티의 어트리뷰트를 정의할 수 있음.
- 누락시 undefined, false가 기본값임.
- enumberable이 false면 object.keys()로 열거 불가능하고, configurable이 false면 프로퍼티 어트리뷰트를 재정의해도 무시됨. writable도 값 재할당 해도 무시됨.
- Object.defineProperties 메서드를 통해 한번에 여러 개의 프로퍼티를 정의할 수 잇음

### 객체 변경 방지

- 객체 확장금지

  - Object.preventExtensions로 객체의 확장(프로퍼티 추가)을 금지함. (동적 추가와 Object.defineProperty 메서드로 추가 금지)
  - 확장이 가능한 객체인지를 Object.isExtensible 메서드로 확인 가능함.

- 객체 밀봉

  - Object.seal 메서드로 객체를 밀봉할 수 있음
  - 읽기 쓰기만 가능 (프로퍼티 추가, 삭제, 프로퍼티 어트리뷰트 재정의 금지)
  - Object.isSealed 메서드로 밀봉 여부 확인 가능

- 객체 동결

  - Object.freeze 메서드로 객체를 동결 가능함.
  - 읽기만 가능함. (프로퍼티 추가, 삭제, 프로퍼티 값 갱신 금지, 프로퍼티 어트리뷰트 재정의 금지)
  - Object.isFrozen 메서드로 여부 확인 가능함.

- 불변 객체

  - 위에 언급한 메서드들은 중첩 객체까지 영향을 주지 못함.
  - 따라서 중첩 객체까지 영향을 주기 위해서는 재귀적으로 호출해야함.
